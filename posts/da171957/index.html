<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="IC卡门卡模拟探秘https:&#x2F;&#x2F;post.smzdm.com&#x2F;p&#x2F;ax08z26d&#x2F; 免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！ 前言现在生活中少不了各种卡，公交卡、地铁卡、银行卡、门禁卡等，它们都是什么卡？ID卡？IC卡？另外带NFC功能的手机也能刷卡使用，笔者通过本文科普一下关于卡的知识，另外文中还有门卡模拟等一系列干货，值友们要看到最后哦！！！ ID和ICID卡 ：">
<meta property="og:type" content="article">
<meta property="og:title" content="IC卡门卡模拟探秘">
<meta property="og:url" content="http://example.com/posts/da171957/index.html">
<meta property="og:site_name" content="Mdb">
<meta property="og:description" content="IC卡门卡模拟探秘https:&#x2F;&#x2F;post.smzdm.com&#x2F;p&#x2F;ax08z26d&#x2F; 免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！ 前言现在生活中少不了各种卡，公交卡、地铁卡、银行卡、门禁卡等，它们都是什么卡？ID卡？IC卡？另外带NFC功能的手机也能刷卡使用，笔者通过本文科普一下关于卡的知识，另外文中还有门卡模拟等一系列干货，值友们要看到最后哦！！！ ID和ICID卡 ：">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-06T06:47:53.809Z">
<meta property="article:modified_time" content="2021-12-06T06:47:53.809Z">
<meta property="article:author" content="MoDianBai">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>IC卡门卡模拟探秘</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="Mdb" type="application/atom+xml" />
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">文章</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://gitee.com/nanstar">项目</a></li>
         
          <li><a href="/guestbook">留言</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/posts/e2f6153e/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/posts/da171957/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/posts/da171957/&text=IC卡门卡模拟探秘"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/posts/da171957/&is_video=false&description=IC卡门卡模拟探秘"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=IC卡门卡模拟探秘&body=Check out this article: http://example.com/posts/da171957/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/posts/da171957/&name=IC卡门卡模拟探秘&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IC%E5%8D%A1%E9%97%A8%E5%8D%A1%E6%A8%A1%E6%8B%9F%E6%8E%A2%E7%A7%98"><span class="toc-number">1.</span> <span class="toc-text">IC卡门卡模拟探秘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E%EF%BC%9A%E6%9C%AC%E6%96%87%E6%B6%89%E5%8F%8A%E7%9A%84%E6%8A%80%E6%9C%AF%E4%BB%85%E4%BE%9B%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E5%92%8C%E6%95%99%E5%AD%A6%E7%94%A8%E9%80%94%EF%BC%8C%E7%A6%81%E6%AD%A2%E9%9D%9E%E6%B3%95%E4%BD%BF%E7%94%A8%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">1.1.</span> <span class="toc-text">免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.2.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ID%E5%92%8CIC"><span class="toc-number">1.2.1.</span> <span class="toc-text">ID和IC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E8%A7%A6%E5%BC%8F%E5%92%8C%E9%9D%9E%E6%8E%A5%E8%A7%A6%E5%BC%8FIC%E5%8D%A1"><span class="toc-number">1.2.2.</span> <span class="toc-text">接触式和非接触式IC卡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IC%E5%8D%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.3.</span> <span class="toc-text">IC卡基础知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IC%E5%8D%A1%E8%AF%BB%E5%86%99"><span class="toc-number">1.4.</span> <span class="toc-text">IC卡读写</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87"><span class="toc-number">1.4.1.</span> <span class="toc-text">设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8D%A1%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.2.</span> <span class="toc-text">读卡方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E5%8D%A1%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.3.</span> <span class="toc-text">写卡方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E6%9C%BANFC%E8%AF%BB%E5%86%99%E5%8D%A1"><span class="toc-number">1.4.4.</span> <span class="toc-text">手机NFC读写卡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IC%E5%8D%A1%E6%A8%A1%E6%8B%9F%EF%BC%88%E6%89%8B%E6%9C%BA%E3%80%81%E6%89%8B%E7%8E%AF%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">IC卡模拟（手机、手环）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MIUI%E9%97%A8%E5%8D%A1"><span class="toc-number">1.5.1.</span> <span class="toc-text">MIUI门卡</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        IC卡门卡模拟探秘
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Mdb</span>
      </span>
      
    <div class="postdate">
        <time datetime="2021-12-06T06:47:53.809Z" itemprop="datePublished">2021-12-06</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="IC卡门卡模拟探秘"><a href="#IC卡门卡模拟探秘" class="headerlink" title="IC卡门卡模拟探秘"></a>IC卡门卡模拟探秘</h1><p><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/ax08z26d/">https://post.smzdm.com/p/ax08z26d/</a></p>
<h2 id="免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！"><a href="#免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！" class="headerlink" title="免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！ "></a><strong>免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！</strong> </h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>现在生活中少不了各种卡，公交卡、地铁卡、银行卡、门禁卡等，它们都是什么卡？ID卡？IC卡？另外带NFC功能的手机也能刷卡使用，笔者通过本文科普一下关于卡的知识，另外文中还有门卡模拟等一系列干货，值友们要看到最后哦！！！</p>
<h3 id="ID和IC"><a href="#ID和IC" class="headerlink" title="ID和IC"></a>ID和IC</h3><p><strong>ID卡</strong> ：全称为身份识别卡（Identification Card），是一种不可写入的感应卡，含固定的编号，主要有台湾SYRIS的EM格式、美国HIDMOTOROLA等各类ID卡，</p>
<p><strong>IC卡</strong> ：全称集成电路卡（Integrated Circuit Card），又称智能卡（Smart Card）。可读写，容量大，有加密功能，数据记录可靠，使用更方便，如一卡通系统，消费系统等，目前主要有<a target="_blank" rel="noopener" href="https://pinpai.smzdm.com/273/">PHILIPS</a>的Mifare系列卡</p>
<p><strong>主要区别</strong> ：ID卡不可写入数据，其记录内容(卡号)只可由芯片生产厂一次性写入，开发商只可读出卡号加以利用,无法根据系统的实际需要制订新的号码管理制度；而IC卡不仅可由授权用户读出大量数据，而且亦可由授权用户写入大量数据(如新的卡号,用户的权限,用户资料等)，IC卡所记录内容可反复擦写</p>
<p>IC卡由于其固有的信息安全、便于携带、比较完善的标准化等优点，在身份认证、银行、电信、公共交通、车场管理等领域正得到越来越多的应用，例如二代身份证，银行的电子钱包，电信的手机SIM卡，公共交通的公交卡、地铁卡，用于收取停车费的停车卡、小区门禁卡等</p>
<h3 id="接触式和非接触式IC卡"><a href="#接触式和非接触式IC卡" class="headerlink" title="接触式和非接触式IC卡"></a>接触式和非接触式IC卡</h3><p>IC卡按结构分有：接触式IC卡和非接触式IC卡<br>接触式IC卡，该类卡是通过IC卡读写设备的触点与IC卡的触点接触后进行数据的读写</p>
<p>接触式IC卡和读卡机</p>
<p>非接触式IC卡，该类卡与卡设备无电路接触，而是通过非接触式的读写技术进行读写（例如RFID、NFC），其内嵌芯片除了CPU、逻辑单元、存储单元外，增加了射频收发电路。该类卡一般用在使用频繁、信息量相对较少、可靠性要求较高的场合</p>
<p>IC 白卡</p>
<p>IC钥匙扣</p>
<p>IC滴胶卡</p>
<p>IC手机贴</p>
<p>NFC是现在主流的非接触式IC卡的读卡技术，其全称是近场通信（near field communication），是基于无线射频识别RFID（Radio Frequency Identification）技术发展起来的一种近距离无线通信技术，与RFID一样，NFC也是通过频谱中无线频率部分的电磁感应耦合方式传递，但两者之间还是存在很大的区别。NFC的传输范围比RFID小，RFID的传输范围可以达到0~1m，但由于NFC采取了独特的信号衰减技术，相对于RFID来说NFC具有成本低、带宽高、能耗低等特点。<br>NFC技术主要特征如下：</p>
<ul>
<li>  用于近距离(10cm以内)安全通信的无线通信技术</li>
</ul>
<p>*</p>
<ul>
<li>  射频频率：13.56MHz</li>
</ul>
<p>*</p>
<ul>
<li>  射频兼容：ISO 14443，ISO 15693，Felica标准</li>
</ul>
<p>*</p>
<ul>
<li>  数据传输速度：106kbit/s，212 kbit/s，424kbit/s</li>
</ul>
<p>现在手机都包含NFC功能，其主板上嵌入了NFC模块，具有三种功能模式：NFC手机作为识读设备(读写器)、NFC手机作为被读设备(卡模拟)、NFC手机之间的点对点通信应用</p>
<h2 id="IC卡基础知识"><a href="#IC卡基础知识" class="headerlink" title="IC卡基础知识"></a>IC卡基础知识</h2><p>IC卡中最常见的是NXP Mifare系列卡，根据卡内使用芯片的不同，分为</p>
<ul>
<li>  Mifare S50，简称M1卡，是最常见的卡，出厂固化UID，可存储修改数据</li>
</ul>
<p>*</p>
<ul>
<li>  Mifare UltraLight，简称M0卡，低成本卡，出厂固化UID，可存储修改数据</li>
</ul>
<p>*</p>
<ul>
<li>  Mifare UID Chinese magic card，简称UID卡，M1卡的变异版本，可修改UID，国外叫做中国魔术卡，可以用来完整克隆M1 S50卡的数据；但是现在新的读卡系统通过检测卡片对特殊指令的回应，可以检测出UID卡，因此可以来拒绝UID卡的访问，来达到屏蔽复制卡的功能</li>
</ul>
<p>*</p>
<ul>
<li>  针对UID卡被屏蔽的问题，另外还有变异版本FUID卡和CUID卡，FUID卡的UID只能修改一次，起防屏蔽作用，专门对付物业升级的防复卡和防复读头；CUID卡则是针对FUID卡做的优化，支持UID号重复擦写，无需锁卡自动起防屏蔽作用</li>
</ul>
<p>以标准M1卡为例，其容量为1K字节，总共分为16个扇区，每个扇区分为4个数据块，每个数据块16个字节</p>
<p>每个扇区中的块按照0 ~ 3编号，第3个块中包含KEYA（密钥A）、控制位、KEYB（密钥B），每个扇区可以通过它包含的密钥A或者密钥B单独加密</p>
<p>0扇区0块是特殊的数据块，用于存放制造商代码，包括芯片序列号UID，ATQA和SAK</p>
<p><strong>非加密卡和加密卡的区别</strong> 就是，非加密卡中所有扇区的KEYA和KEYB数值都是默认值FFFFFFFFFFFF；而加密卡中，其中有扇区的KEYA和KEYB不等于FFFFFFFFFFFF，部分扇区加密的卡称半加密卡，所有扇区都加密的卡称全加密卡</p>
<p>M1卡数据结构</p>
<h2 id="IC卡读写"><a href="#IC卡读写" class="headerlink" title="IC卡读写"></a>IC卡读写</h2><h3 id="设备"><a href="#设备" class="headerlink" title="设备"></a>设备</h3><p>如果想读取IC卡中的数据，需要通过支持读卡技术（RFID、NFC）的硬件设备支持了，比如pn532、acr122u、proxmark3等，笔者使用的是Proxmark3，忽略性价比因素，相比于其它傻瓜式设备，proxmark3的功能更全面些，可玩性也更高，另外集成NFC模块的手机也支持IC卡片的读取</p>
<p>Proxmark3</p>
<p>读取IC卡</p>
<p>Proxmark3是由Jonathan Westhues设计并且开发的开源硬件，其主要用RFID的嗅探、读取以及克隆等的操作<br><a target="_blank" rel="noopener" href="http://www.proxmark.org/">官方网站</a></p>
<p><a target="_blank" rel="noopener" href="http://www.proxmark.org/forum/index.php">官方论坛</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Proxmark/proxmark3/">官方固件（Github）</a></p>
<p>官方固件更新记录：最近更新2019/03/15</p>
<p>除了官方软件，还有其它大神的软件：Proxbrute、EMV、Iceman</p>
<p>笔者用的是<a target="_blank" rel="noopener" href="https://github.com/iceman1001/proxmark3">冰人（iceman）固件</a><br>冰人固件更新记录：最近更新2019/03/06</p>
<h3 id="读卡方法："><a href="#读卡方法：" class="headerlink" title="读卡方法："></a>读卡方法：</h3><p>用USB连接proxmark3后，安装完驱动，可以在设备管理器中查看设备串口号<br>串口识别COM4</p>
<p>打开PM3 Universal GUI软件，选择 COM4 连接proxmark3</p>
<p>查看Proxmark3的固件版本，发送指令：</p>
<ul>
<li>  hw version</li>
</ul>
<p>已刷冰人固件</p>
<p>在IC卡感应位置放上IC卡</p>
<p>然后读取卡片信息，发送指令：</p>
<ul>
<li>  hf 14a info</li>
</ul>
<p>其实Proxmark3最重要的功能还支持获取扇区的密钥，从而获取所有扇区的数据，这部分内容笔者本来有写，而且是本文的主要内容，无奈值得买平台对敏感信息审核比较严格，笔者第一次的文章提交未通过，只好把大部分违规内容给删除了，关于Proxmark3获取密钥的方法，值友们可以搜索其它平台，有类似方法介绍</p>
<p>在已知密钥的情况下，通过密钥将卡片数据读出，保存在仿真器内存中，发送指令：</p>
<ul>
<li>  hf mf ecfill A 1</li>
</ul>
<p>最后将仿真器内存中的卡片数据保存位文件TestData.eml，发送指令：</p>
<ul>
<li>  hf mf esave 1 TestData</li>
</ul>
<p>打开TestData.eml文件，可以看到所有扇区的数据都成功读取</p>
<h3 id="写卡方法："><a href="#写卡方法：" class="headerlink" title="写卡方法："></a>写卡方法：</h3><p><strong>写UID卡：</strong><br>准备一张UID卡，读取卡片信息，其中Answers to magic commands: Yes表示这张卡是中国魔术卡（UID卡）</p>
<p>写数据到UID卡中，发送指令：</p>
<ul>
<li>  hf mf cload TestData</li>
</ul>
<p>读出UID卡每个扇区中数据，以确认是否成功写入，发送指令：</p>
<ul>
<li>  hf mf cgetsc n</li>
</ul>
<p><strong>cload</strong> 和<strong>cgetsc</strong> 命令是专门针对UID卡的，换成其它类型卡比如CUID卡则无效</p>
<p><strong>写CUID卡：</strong><br>那么写CUID卡该如何操作呢？现在大部分门禁系统都加入了屏蔽系统，使用复制的UID卡会出现只能使用一次，下次刷卡无效的情况，而CUID卡防屏蔽解决了这个问题，所以笔者继续研究如何写CUID卡，写CUID卡需要指令：</p>
<ul>
<li>  hf mf wrbl blknum A/B KEYA/KEYB 000102030405060708090A0B0C0D0E0F</li>
</ul>
<p>麻烦的是该指令每次只写1个块的数据，而卡中总共64块，所以需要执行64条指令，手动执行肯定比较耗时耗力，因此笔者写了lua脚本（cuidwrite.lua）自动执行写64块的操作</p>
<p>…</p>
<p>CUID写操作脚本执行</p>
<p>读取CUID卡片信息，其中Answers to magic commands: NO，只有UID卡才会返回YES</p>
<h3 id="手机NFC读写卡"><a href="#手机NFC读写卡" class="headerlink" title="手机NFC读写卡"></a>手机NFC读写卡</h3><p>手机中安装MCT（mifare classic tool），无需root，可读取mifare系列IC卡的数据</p>
<p>MCT读取的数据</p>
<p>MCT写卡需要数据和密钥，可以只添加密钥，然后利用密钥直接读取卡片数据<br>1）编辑/增加密钥 ：新建密钥文件TestKey，进入密钥编辑页面，将密钥数据从电脑上复制然后粘贴进来</p>
<p>2）读取原卡数据：将原卡放在手机NFC感应区域，在MCT中选择正确的密钥TestKey，所有扇区数据就能成功读取</p>
<p>如果选择不正确的密钥，则无法读取完整数据</p>
<p>3）保存数据至转储文件</p>
<p>4）数据写入新卡：准备一张空白UID卡，识别卡片后，选择密钥文件和转储文件，选择扇区，等待写入完成即可</p>
<p>这么简单就完事了，还是太天真？<br>重新读取卡片数据确认，在MCT里选择比较转储功能，发现卡中0扇区0块的数据与转储文件不同，这说明0扇区0块的数据没有成功写入</p>
<p>后来笔者研究了下，原来需要在写转储时勾选 “高级：使能厂商块写入”选项，勾上这个选项后另外单独写一次0扇区</p>
<p>但是反复尝试了UID卡，这种方法也无法写入0扇区；尝试了CUID卡，这种方法可以写入0扇区<br>注：MCT方式只能写CUID卡，用MCT写卡没有Proxmark3稳定，有时会出现写坏锁死CUID卡的情况</p>
<h2 id="IC卡模拟（手机、手环）"><a href="#IC卡模拟（手机、手环）" class="headerlink" title="IC卡模拟（手机、手环）"></a>IC卡模拟（手机、手环）</h2><h3 id="MIUI门卡"><a href="#MIUI门卡" class="headerlink" title="MIUI门卡"></a>MIUI门卡</h3><p>小米MIUI推出了门卡模拟的功能，不仅可以将卡数据写入到手机中，而且手环也可以，当然需要写特殊手段，但是为了安全考量，小米官方都不支持加密卡的模拟<br>笔者的<a target="_blank" rel="noopener" href="https://www.smzdm.com/zy/detail/apy5d85/">小米MIX2</a>板载NFC芯片是NXP 80T19</p>
<p>NXP 80T19芯片其模拟的卡类型属于NXP JCOP系列，Proxmark3的官方固件是不支持JCOP卡，后来笔者是刷了冰人固件才能正常识别MIX2模拟的门卡<br>NXP JCOP系列芯片卡是恩智浦NXP公司在高安全性的解决方案高性能产品。广泛应用如银行与金融，移动通信，公共交通，访客访问和网络接入等领域。支持接触式、非接触式、支持接触式与非接触式读写，内含有一个JCOP版本操作系统，并提供40 k-80K字节EEPROM存储器。NXP JCOP系列芯片卡出厂带传输密钥（Transport Key），需要经过初始化后，方可访问卡片内置的COS系统，因为此类芯片卡的安全系列非常高。</p>
<p>小米MIUI推出的门卡功能有两个模式：模拟实体门卡和添加虚拟门卡</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">文章</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://gitee.com/nanstar">项目</a></li>
         
          <li><a href="/guestbook">留言</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IC%E5%8D%A1%E9%97%A8%E5%8D%A1%E6%A8%A1%E6%8B%9F%E6%8E%A2%E7%A7%98"><span class="toc-number">1.</span> <span class="toc-text">IC卡门卡模拟探秘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E%EF%BC%9A%E6%9C%AC%E6%96%87%E6%B6%89%E5%8F%8A%E7%9A%84%E6%8A%80%E6%9C%AF%E4%BB%85%E4%BE%9B%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E5%92%8C%E6%95%99%E5%AD%A6%E7%94%A8%E9%80%94%EF%BC%8C%E7%A6%81%E6%AD%A2%E9%9D%9E%E6%B3%95%E4%BD%BF%E7%94%A8%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">1.1.</span> <span class="toc-text">免责声明：本文涉及的技术仅供安全学习和教学用途，禁止非法使用！！！ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.2.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ID%E5%92%8CIC"><span class="toc-number">1.2.1.</span> <span class="toc-text">ID和IC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E8%A7%A6%E5%BC%8F%E5%92%8C%E9%9D%9E%E6%8E%A5%E8%A7%A6%E5%BC%8FIC%E5%8D%A1"><span class="toc-number">1.2.2.</span> <span class="toc-text">接触式和非接触式IC卡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IC%E5%8D%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.3.</span> <span class="toc-text">IC卡基础知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IC%E5%8D%A1%E8%AF%BB%E5%86%99"><span class="toc-number">1.4.</span> <span class="toc-text">IC卡读写</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87"><span class="toc-number">1.4.1.</span> <span class="toc-text">设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8D%A1%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.2.</span> <span class="toc-text">读卡方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E5%8D%A1%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.3.</span> <span class="toc-text">写卡方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E6%9C%BANFC%E8%AF%BB%E5%86%99%E5%8D%A1"><span class="toc-number">1.4.4.</span> <span class="toc-text">手机NFC读写卡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IC%E5%8D%A1%E6%A8%A1%E6%8B%9F%EF%BC%88%E6%89%8B%E6%9C%BA%E3%80%81%E6%89%8B%E7%8E%AF%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">IC卡模拟（手机、手环）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MIUI%E9%97%A8%E5%8D%A1"><span class="toc-number">1.5.1.</span> <span class="toc-text">MIUI门卡</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/posts/da171957/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/posts/da171957/&text=IC卡门卡模拟探秘"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/posts/da171957/&is_video=false&description=IC卡门卡模拟探秘"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=IC卡门卡模拟探秘&body=Check out this article: http://example.com/posts/da171957/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/posts/da171957/&title=IC卡门卡模拟探秘"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/posts/da171957/&name=IC卡门卡模拟探秘&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">

 <div class="footer-left">
    Copyright &copy; 2022 MoDianBai
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">文章</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://gitee.com/nanstar">项目</a></li>
         
          <li><a href="/guestbook">留言</a></li>
        
      </ul>
    </nav>
  </div>


<div id="container"></div>


<link rel="stylesheet" href="https://jjeejj.github.io/css/gitment.css">
<script src="https://jjeejj.github.io/js/gitment.js"></script>


<script>
    var gitment = new Gitment({
        id: 'Mon Dec 06 2021 14:47:53 GMT+0800', 
        owner: 'MatchLittle',
        repo: 'matchlittleBlog',
        oauth: {
            client_id: 'a67c8ce813bacd2239ad',
            client_secret: '1ce5ab53ecfff68e3bb18ce1582cc3ed55e47c8d',
        },
     });
    gitment.render('container');  
</script>


 





</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">



<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>


<script src="/js/canvas-nest.js"></script>

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


